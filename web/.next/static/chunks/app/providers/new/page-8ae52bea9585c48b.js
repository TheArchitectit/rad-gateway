(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{5560:function(e,r,s){Promise.resolve().then(s.bind(s,5006))},5006:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return S}});var i=s(7437),n=s(9376),a=s(4892),t=s(6311),o=s(2265),l=s(9501),d=s(3590),c=s(7119),u=s(3141),p=s(3964),m=s(5510),g=s(7769),h=s(2208),x=s(1817);let y=(0,s(8755).Z)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),v=c.Ry({name:c.Z_().min(1,"Name is required").max(100,"Name too long"),slug:c.Z_().min(1,"Slug is required").regex(/^[a-z0-9-]+$/,"Slug must be lowercase letters, numbers, and hyphens"),providerType:c.Km(["openai","anthropic","gemini"],{required_error:"Provider type is required"}),baseUrl:c.Z_().url("Must be a valid URL").optional().or(c.i0("")),apiKey:c.Z_().min(1,"API key is required"),priority:c.Rx().int().min(0).max(100).default(0),weight:c.Rx().int().min(1).max(100).default(1)});function b(e){var r,s,n,a,t,c,b;let{defaultValues:j,onSubmit:N,onCancel:w,onTestConnection:C,isLoading:k=!1,submitLabel:A="Create Provider"}=e,[P,S]=(0,o.useState)(!1),[_,T]=(0,o.useState)(!1),[Z,I]=(0,o.useState)(null),{register:L,handleSubmit:q,watch:F,formState:{errors:K,isDirty:U}}=(0,l.cI)({resolver:(0,d.F)(v),defaultValues:{name:"",slug:"",providerType:"openai",baseUrl:"",apiKey:"",priority:0,weight:1,...j}}),W=F("providerType"),R=async()=>{if(!C)return;let e=F();T(!0),I(null);try{let r=await C(e);I(r)}catch(e){I({success:!1,message:e instanceof Error?e.message:"Connection test failed"})}finally{T(!1)}};return(0,i.jsxs)("form",{onSubmit:q(N),className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(p.W,{label:"Name",error:null===(r=K.name)||void 0===r?void 0:r.message,hint:"Display name for this provider",children:(0,i.jsx)("input",{type:"text",...L("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., OpenAI Production"})}),(0,i.jsx)(p.W,{label:"Slug",error:null===(s=K.slug)||void 0===s?void 0:s.message,hint:"Unique identifier (auto-generated from name)",children:(0,i.jsx)("input",{type:"text",...L("slug"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., openai-production"})})]}),(0,i.jsxs)(m.m,{label:"Provider Type",error:null===(n=K.providerType)||void 0===n?void 0:n.message,hint:"The AI provider service",...L("providerType"),children:[(0,i.jsx)("option",{value:"openai",children:"OpenAI"}),(0,i.jsx)("option",{value:"anthropic",children:"Anthropic"}),(0,i.jsx)("option",{value:"gemini",children:"Google Gemini"})]}),(0,i.jsx)(p.W,{label:"API Key",error:null===(a=K.apiKey)||void 0===a?void 0:a.message,hint:"Your ".concat(W," API key"),children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:P?"text":"password",...L("apiKey"),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"sk-..."}),(0,i.jsx)("button",{type:"button",onClick:()=>S(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:P?(0,i.jsx)(g.Z,{className:"w-4 h-4"}):(0,i.jsx)(h.Z,{className:"w-4 h-4"})})]})}),(0,i.jsx)(p.W,{label:"Base URL (Optional)",error:null===(t=K.baseUrl)||void 0===t?void 0:t.message,hint:"Default: ".concat(f(W)),children:(0,i.jsx)("input",{type:"url",...L("baseUrl"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:f(W)})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(p.W,{label:"Priority",error:null===(c=K.priority)||void 0===c?void 0:c.message,hint:"Higher priority providers are preferred (0-100)",children:(0,i.jsx)("input",{type:"number",...L("priority",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:0,max:100})}),(0,i.jsx)(p.W,{label:"Weight",error:null===(b=K.weight)||void 0===b?void 0:b.message,hint:"Load balancing weight (1-100)",children:(0,i.jsx)("input",{type:"number",...L("weight",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:1,max:100})})]}),Z&&(0,i.jsxs)("div",{className:"p-4 rounded-lg ".concat(Z.success?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:[(0,i.jsx)("p",{className:"font-medium",children:Z.success?"Connection successful":"Connection failed"}),(0,i.jsx)("p",{className:"text-sm mt-1",children:Z.message}),Z.latency&&(0,i.jsxs)("p",{className:"text-sm mt-1",children:["Latency: ",Z.latency,"ms"]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[C&&(0,i.jsx)(u.z,{type:"button",variant:"secondary",onClick:R,disabled:_||!U,children:_?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsx)(u.z,{type:"button",variant:"secondary",onClick:w,children:"Cancel"}),(0,i.jsx)(u.z,{type:"submit",disabled:k,children:k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{className:"w-4 h-4 mr-2 animate-spin"}),A,"..."]}):A})]})]})]})}function f(e){switch(e){case"openai":return"https://api.openai.com/v1";case"anthropic":return"https://api.anthropic.com";case"gemini":return"https://generativelanguage.googleapis.com";default:return""}}var j=s(9827),N=s(1770),w=s(1961),C=s(5542);let k=async e=>w.x1.post("/v0/admin/providers",e),A=async e=>w.x1.post("/v0/admin/providers/".concat(e,"/test"));var P=s(1051);function S(){let e=(0,n.useRouter)(),r=function(e){let r=(0,j.NL)();return(0,N.D)({mutationFn:k,onSuccess:e=>{r.invalidateQueries({queryKey:C.v2.lists()}),r.setQueryData(C.v2.detail(e.name),e)}})}(),s=(0,N.D)({mutationFn:A}),o=async s=>{try{await r.mutateAsync(s),P.c0.success("Provider created",'Successfully created provider "'.concat(s.name,'"')),e.push("/providers")}catch(r){let e=r instanceof w.Hx?r.message:"Failed to create provider";P.c0.error("Creation failed",e)}},l=async e=>{try{return await s.mutateAsync(e.slug)}catch(e){throw e}};return(0,i.jsx)(a.L,{children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Provider"}),(0,i.jsx)("p",{className:"text-gray-500 mt-1",children:"Add a new AI provider to your gateway"})]}),(0,i.jsx)(t.Z,{children:(0,i.jsx)(b,{onSubmit:o,onCancel:()=>{e.push("/providers")},onTestConnection:l,isLoading:r.isPending,submitLabel:"Create Provider"})})]})})}}},function(e){e.O(0,[142,877,262,261,147,971,117,744],function(){return e(e.s=5560)}),_N_E=e.O()}]);