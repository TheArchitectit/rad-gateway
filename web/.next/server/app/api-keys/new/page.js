(()=>{var e={};e.id=588,e.ids=[588],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8209:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(1755),s(1740),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["api-keys",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1755)),"/mnt/ollama/git/RADAPI01/web/src/app/api-keys/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1740)),"/mnt/ollama/git/RADAPI01/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/mnt/ollama/git/RADAPI01/web/src/app/api-keys/new/page.tsx"],m="/api-keys/new/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/api-keys/new/page",pathname:"/api-keys/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9393:(e,t,s)=>{Promise.resolve().then(s.bind(s,8896))},3810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(5578).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8896:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(326),a=s(7577),i=s(5047),n=s(8350),o=s(5030),l=s(4723),d=s(4064),c=s(770),m=s(4583),p=s(1785),u=s(2716),g=s(7506),x=s(1216),h=s(2714);let y=(0,s(5578).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var w=s(3810);let f=c.Ry({name:c.Z_().min(1,"Name is required").max(100,"Name too long"),workspaceId:c.Z_().min(1,"Workspace is required"),expiresAt:c.Z_().optional(),rateLimit:c.Rx().int().min(1).max(1e4).optional(),allowedModels:c.IX(c.Z_()).optional(),allowedAPIs:c.IX(c.Z_()).optional(),metadata:c.IM(c._4()).optional()});function b({defaultValues:e,onSubmit:t,onCancel:s,isLoading:i=!1,submitLabel:n="Create API Key",workspaces:o=[],availableModels:c=[]}){let[x,h]=(0,a.useState)(!1),{register:y,handleSubmit:w,formState:{errors:b}}=(0,l.cI)({resolver:(0,d.F)(f),defaultValues:{name:"",workspaceId:"",allowedAPIs:[],allowedModels:[],...e}});return(0,r.jsxs)("form",{onSubmit:w(t),className:"space-y-6",children:[r.jsx(p.W,{label:"Name",error:b.name?.message,hint:"A descriptive name for this API key",required:!0,children:r.jsx("input",{type:"text",...y("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., Production App Key"})}),(0,r.jsxs)(u.m,{label:"Workspace",error:b.workspaceId?.message,hint:"The workspace this key belongs to",required:!0,...y("workspaceId"),children:[r.jsx("option",{value:"",children:"Select a workspace"}),o.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]}),r.jsx(p.W,{label:"Expiration (Optional)",error:b.expiresAt?.message,hint:"When this key will automatically expire",children:r.jsx("input",{type:"datetime-local",...y("expiresAt"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),r.jsx("div",{className:"border-t border-gray-200 pt-6",children:(0,r.jsxs)("button",{type:"button",onClick:()=>h(!x),className:"flex items-center text-sm text-indigo-600 hover:text-indigo-800",children:[x?"Hide":"Show"," Advanced Options"]})}),x&&(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-top-2 duration-200",children:[r.jsx(p.W,{label:"Rate Limit (requests per minute)",error:b.rateLimit?.message,hint:"Maximum requests per minute (1-10000)",children:r.jsx("input",{type:"number",...y("rateLimit",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:1,max:1e4,placeholder:"60"})}),r.jsx(p.W,{label:"Allowed Models",error:b.allowedModels?.message,hint:"Restrict this key to specific models (leave empty for all)",children:r.jsx("div",{className:"space-y-2",children:c.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded",children:[r.jsx("input",{type:"checkbox",value:e,...y("allowedModels"),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm",children:e})]},e))}):r.jsx("p",{className:"text-sm text-gray-500",children:"No models available"})})}),r.jsx(p.W,{label:"Allowed APIs",error:b.allowedAPIs?.message,hint:"Restrict which API endpoints this key can access",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:["chat","completions","embeddings","images","audio"].map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded",children:[r.jsx("input",{type:"checkbox",value:e,...y("allowedAPIs"),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm capitalize",children:e})]},e))})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx(m.z,{type:"button",variant:"secondary",onClick:s,children:"Cancel"}),r.jsx(m.z,{type:"submit",disabled:i,children:i?(0,r.jsxs)(r.Fragment,{children:[r.jsx(g.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):n})]})]})}function k({keySecret:e,keyName:t,onClose:s}){let[i,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"API Key Created"}),(0,r.jsxs)("p",{className:"text-gray-500 mt-1",children:['Your API key for "',t,'" has been created successfully.']})]}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"This is the only time you will see the full key. Please copy it now."})}),r.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("code",{className:"text-sm font-mono text-gray-800 truncate flex-1 mr-4",children:i?e:e.slice(0,10)+"..."}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>n(!i),className:"p-2 hover:bg-gray-200 rounded",children:i?r.jsx(x.Z,{className:"w-4 h-4"}):r.jsx(h.Z,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(e),l(!0),setTimeout(()=>l(!1),2e3)},className:"p-2 hover:bg-gray-200 rounded",children:o?r.jsx(y,{className:"w-4 h-4 text-green-600"}):r.jsx(w.Z,{className:"w-4 h-4"})})]})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(m.z,{onClick:s,children:"Done"})})]})})}var j=s(4976),v=s(119),N=s(5740),A=s(4684);let P=async e=>N.x1.post("/v0/admin/apikeys",e);var S=s(6105),I=s(8342);function D(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(null),l=function(e){let t=(0,j.NL)();return(0,v.D)({mutationFn:P,onSuccess:e=>{t.invalidateQueries({queryKey:A.xb.lists()});let{keySecret:s,...r}=e;t.setQueryData(A.xb.detail(e.id),r)}})}(),d=(0,S._O)(),c=async e=>{try{let t=await l.mutateAsync(e);s({keySecret:t.keySecret,name:t.name})}catch(t){let e=t instanceof N.Hx?t.message:"Failed to create API key";I.c0.error("Creation failed",e)}},m=d.map(e=>({id:e.id,name:e.name}));return r.jsx(n.L,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create API Key"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Generate a new API key for accessing the gateway"})]}),r.jsx(o.Z,{children:r.jsx(b,{onSubmit:c,onCancel:()=>{e.push("/api-keys")},isLoading:l.isPending,submitLabel:"Create API Key",workspaces:m,availableModels:["gpt-4","gpt-4o","gpt-4o-mini","claude-3-opus","claude-3-sonnet","gemini-pro"]})}),t&&r.jsx(k,{keySecret:t.keySecret,keyName:t.name,onClose:()=>{s(null),e.push("/api-keys")}})]})})}},6105:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n,_O:()=>o});var r=s(551),a=s(5251),i=s(5740);let n=(0,r.Ue)()((0,a.tJ)((e,t)=>({current:null,list:[],recent:[],favorites:[],isLoading:!1,error:null,setCurrent:s=>{s&&t().addToRecent(s),e({current:s})},setWorkspaces:t=>{e({list:t})},addWorkspace:s=>{let{list:r}=t();r.find(e=>e.id===s.id)||e({list:[...r,s]})},updateWorkspace:(s,r)=>{let{list:a,current:i}=t();e({list:a.map(e=>e.id===s?{...e,...r}:e),current:i?.id===s?{...i,...r}:i})},removeWorkspace:s=>{let{list:r,current:a,favorites:i}=t();e({list:r.filter(e=>e.id!==s),current:a?.id===s?null:a,favorites:i.filter(e=>e!==s)})},addToFavorites:s=>{let{favorites:r}=t();r.includes(s)||e({favorites:[...r,s]})},removeFromFavorites:s=>{let{favorites:r}=t();e({favorites:r.filter(e=>e!==s)})},addToRecent:s=>{let{recent:r}=t(),a=r.filter(e=>e.id!==s.id);e({recent:[s,...a].slice(0,5)})},clearError:()=>{e({error:null})},setLoading:t=>{e({isLoading:t})},fetchWorkspaces:async()=>{e({isLoading:!0,error:null});try{await new Promise(e=>setTimeout(e,300));let s=[{id:"ws-1",name:"Production",slug:"production",description:"Production environment workspace",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ownerId:"user-1",memberCount:12,settings:{theme:"dark",timezone:"UTC",currency:"USD",dateFormat:"YYYY-MM-DD"}},{id:"ws-2",name:"Staging",slug:"staging",description:"Staging environment for testing",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ownerId:"user-1",memberCount:5,settings:{theme:"light",timezone:"UTC",currency:"USD",dateFormat:"YYYY-MM-DD"}},{id:"ws-3",name:"Development",slug:"development",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ownerId:"user-1",memberCount:3,settings:{theme:"system",timezone:"UTC",currency:"USD",dateFormat:"YYYY-MM-DD"}}];e({list:s,isLoading:!1});let{current:r}=t();!r&&s.length>0&&e({current:s[0]||null})}catch(t){throw e({isLoading:!1,error:t instanceof i.Hx?t.message:t instanceof Error?t.message:"Failed to fetch workspaces"}),t}},createWorkspace:async s=>{e({isLoading:!0,error:null});try{await new Promise(e=>setTimeout(e,500));let r={id:`ws-${Date.now()}`,name:s.name||"New Workspace",slug:s.slug||`workspace-${Date.now()}`,...s.description&&{description:s.description},...s.logo&&{logo:s.logo},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ownerId:"user-1",memberCount:1,settings:s.settings||{theme:"system",timezone:"UTC",currency:"USD",dateFormat:"YYYY-MM-DD"}};return t().addWorkspace(r),e({isLoading:!1}),r}catch(t){throw e({isLoading:!1,error:t instanceof i.Hx?t.message:t instanceof Error?t.message:"Failed to create workspace"}),t}},updateWorkspaceRemote:async(s,r)=>{e({isLoading:!0,error:null});try{await new Promise(e=>setTimeout(e,300)),t().updateWorkspace(s,{...r,updatedAt:new Date().toISOString()}),e({isLoading:!1})}catch(t){throw e({isLoading:!1,error:t instanceof i.Hx?t.message:t instanceof Error?t.message:"Failed to update workspace"}),t}},deleteWorkspace:async s=>{e({isLoading:!0,error:null});try{await new Promise(e=>setTimeout(e,300)),t().removeWorkspace(s),e({isLoading:!1})}catch(t){throw e({isLoading:!1,error:t instanceof i.Hx?t.message:t instanceof Error?t.message:"Failed to delete workspace"}),t}}}),{name:"rad-workspace-storage",partialize:e=>({current:e.current,recent:e.recent,favorites:e.favorites})})),o=()=>n(e=>e.list)},1755:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/mnt/ollama/git/RADAPI01/web/src/app/api-keys/new/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[604,378,156,353,31],()=>s(8209));module.exports=r})();