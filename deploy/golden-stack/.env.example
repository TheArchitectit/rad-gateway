# Golden Stack Environment Configuration - Example File
# ==============================================================================
# WARNING: This file contains EXAMPLE values only. NEVER use these in production.
# For production deployments, use strong, unique passwords and encryption keys.
#
# Security Notice:
# - Generate all passwords using: openssl rand -base64 32
# - Generate encryption keys using: openssl rand -base64 24
# - Store production secrets in a secure vault (Infisical/OpenBao)
# - This file should be copied to .env and customized for your environment
# - The .env file is git-ignored and should NEVER be committed
#
# See: docs/operations/golden-stack-env-reference.md for complete documentation
# ==============================================================================

# ==============================================================================
# PostgreSQL Configuration (Shared Database)
# ==============================================================================
# These values configure the shared PostgreSQL instance used by both
# Infisical and OpenBao. In production, consider using separate database
# instances for better isolation.

# PostgreSQL superuser credentials (used for database creation)
POSTGRES_USER=secretstack
POSTGRES_PASSWORD=change-me-in-production-use-strong-password
POSTGRES_DB=postgres

# PostgreSQL connection settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_SSLMODE=prefer

# ==============================================================================
# Infisical Configuration (Hot Vault)
# ==============================================================================
# Infisical serves as the primary secrets management interface (hot vault)
# for operational secrets that need frequent access.

# Infisical application database
INFISICAL_DB_NAME=infisical_db
INFISICAL_DB_USER=infisical
INFISICAL_DB_PASSWORD=change-me-infisical-db-password

# Full database URL (constructed from above if not set)
# Format: postgresql://user:password@host:port/database
INFISICAL_DB_URL=postgresql://infisical:change-me-infisical-db-password@localhost:5432/infisical_db

# Infisical encryption key (used for secret encryption at rest)
# Generate with: openssl rand -base64 24
INFISICAL_ENCRYPTION_KEY=change-me-use-openssl-rand-base64-24

# Infisical service configuration
INFISICAL_API_URL=http://0.0.0.0:8080
INFISICAL_UI_URL=http://0.0.0.0:8080
INFISICAL_PORT=8080

# Infisical administrative credentials (for initial setup)
INFISICAL_ADMIN_EMAIL=admin@example.com
INFISICAL_ADMIN_PASSWORD=change-me-admin-password

# Infisical service token (for RAD Gateway integration)
# Format: st.<uuid>.<uuid>.<hash>
INFISICAL_SERVICE_TOKEN=st.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Infisical project configuration
INFISICAL_PROJECT_SLUG=my-project-slug
INFISICAL_WORKSPACE_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# ==============================================================================
# OpenBao Configuration (Cold Vault)
# ==============================================================================
# OpenBao serves as the long-term secrets retention vault (cold vault)
# for compliance and audit requirements.

# OpenBao application database
OPENBAO_DB_NAME=openbao_db
OPENBAO_DB_USER=openbao
OPENBAO_DB_PASSWORD=change-me-openbao-db-password

# Full database URL (constructed from above if not set)
# Format: postgresql://user:password@host:port/database
OPENBAO_DB_URL=postgresql://openbao:change-me-openbao-db-password@localhost:5432/openbao_db

# OpenBao API configuration
OPENBAO_API_ADDR=http://0.0.0.0:8200
OPENBAO_API_PORT=8200
OPENBAO_CLUSTER_ADDR=https://0.0.0.0:8201

# OpenBao seal configuration (for auto-unseal in dev mode only)
# In production, use proper seal mechanisms (AWS KMS, HSM, etc.)
OPENBAO_DEV_ROOT_TOKEN_ID=dev-root-token-change-me

# Cold vault retention settings
OPENBAO_COLD_VAULT_RETENTION_DAYS=3650
OPENBAO_COLD_VAULT_MAX_VERSIONS=100

# ==============================================================================
# Golden Stack Integration
# ==============================================================================
# Settings for how the components interact with each other.

# RAD Gateway integration
GOLDEN_STACK_RAD_API_KEYS=default:change-me-rad-api-key

# Backup and retention settings
GOLDEN_STACK_BACKUP_RETENTION_DAYS=30
GOLDEN_STACK_BACKUP_SCHEDULE=0 2 * * *

# Network configuration
GOLDEN_STACK_NETWORK_NAME=golden-stack-net
GOLDEN_STACK_POD_NAME=secret-stack

# ==============================================================================
# RAD Gateway Configuration
# ==============================================================================
# Settings for the RAD Gateway service that integrates with the Golden Stack.

# Application settings
RAD_LISTEN_ADDR=:8090
RAD_LOG_LEVEL=info
RAD_ENVIRONMENT=alpha

# Data paths
RAD_DATA_DIR=/data

# Provider API keys (loaded from Infisical in production)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GEMINI_API_KEY=

# Guardrails MCP endpoint (optional)
GUARDRAILS_MCP_SSE_URL=
GUARDRAILS_MCP_API_KEY=

# ==============================================================================
# Container/Deployment Settings
# ==============================================================================

# Container runtime (podman or docker)
CONTAINER_RUNTIME=podman

# Image tags
INFISICAL_IMAGE_TAG=latest
OPENBAO_IMAGE_TAG=latest
POSTGRES_IMAGE_TAG=16

# Volume names
POSTGRES_VOLUME=postgres-data
OPENBAO_VOLUME=openbao-data
INFISICAL_VOLUME=infisical-data

# Resource limits (optional)
POSTGRES_MEMORY_LIMIT=1g
INFISICAL_MEMORY_LIMIT=512m
OPENBAO_MEMORY_LIMIT=512m

# ==============================================================================
# Security Hardening (Production Only)
# ==============================================================================
# Uncomment and configure these for production deployments.

# TLS Configuration
# INFISICAL_TLS_CERT_PATH=/etc/ssl/certs/infisical.crt
# INFISICAL_TLS_KEY_PATH=/etc/ssl/private/infisical.key
# OPENBAO_TLS_CERT_PATH=/etc/ssl/certs/openbao.crt
# OPENBAO_TLS_KEY_PATH=/etc/ssl/private/openbao.key

# IP Allowlist (comma-separated CIDRs)
# INFISICAL_IP_ALLOWLIST=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
# OPENBAO_IP_ALLOWLIST=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Audit logging
# OPENBAO_AUDIT_LOG_PATH=/var/log/openbao/audit.log
# INFISICAL_AUDIT_LOG_PATH=/var/log/infisical/audit.log
