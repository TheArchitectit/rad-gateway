(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{5560:function(e,t,r){Promise.resolve().then(r.bind(r,6337))},5658:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(2911).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5279:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(2911).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1961:function(e,t,r){"use strict";r.d(t,{Hx:function(){return i},x1:function(){return n}});let s=r(257).env.NEXT_PUBLIC_API_URL||"http://172.16.30.45:8090";class a{setAuthToken(e){this.authToken=e}getHeaders(){let e={"Content-Type":"application/json",Accept:"application/json"};return this.authToken&&(e.Authorization="Bearer ".concat(this.authToken)),e}buildUrl(e,t){let r=new URL("".concat(this.baseUrl).concat(e));return t&&Object.entries(t).forEach(e=>{let[t,s]=e;null!=s&&r.searchParams.set(t,String(s))}),r.toString()}async handleResponse(e){if(!e.ok){let t=await e.json().catch(()=>({error:{code:"unknown_error",message:"An unexpected error occurred"}}));throw new i(t.error.message,t.error.code,e.status,t.error.details,t.error.requestId)}if(204!==e.status)return e.json()}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.buildUrl(e,t.params),s=await fetch(r,{...t,method:"GET",headers:{...this.getHeaders(),...t.headers}});return this.handleResponse(s)}async post(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this.buildUrl(e,r.params),a=await fetch(s,{...r,method:"POST",headers:{...this.getHeaders(),...r.headers},body:t?JSON.stringify(t):null});return this.handleResponse(a)}async put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this.buildUrl(e,r.params),a=await fetch(s,{...r,method:"PUT",headers:{...this.getHeaders(),...r.headers},body:t?JSON.stringify(t):null});return this.handleResponse(a)}async patch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this.buildUrl(e,r.params),a=await fetch(s,{...r,method:"PATCH",headers:{...this.getHeaders(),...r.headers},body:t?JSON.stringify(t):null});return this.handleResponse(a)}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.buildUrl(e,t.params),s=await fetch(r,{...t,method:"DELETE",headers:{...this.getHeaders(),...t.headers}});return this.handleResponse(s)}constructor(e){this.authToken=null,this.baseUrl=e.replace(/\/$/,"")}}class i extends Error{isUnauthorized(){return 401===this.status}isForbidden(){return 403===this.status}isNotFound(){return 404===this.status}isValidationError(){return 400===this.status||422===this.status}constructor(e,t,r,s,a){super(e),this.code=t,this.status=r,this.details=s,this.requestId=a,this.name="APIError"}}let n=new a(s)},6337:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var s=r(7437),a=r(9376),i=r(4892),n=r(6311),l=r(2265),o=r(9501),d=r(3590),c=r(7119),u=r(3141),h=r(3964),p=r(5510),m=r(5658),g=r(5279),f=r(9280);let y=(0,r(2911).Z)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),x=c.Ry({name:c.Z_().min(1,"Name is required").max(100,"Name too long"),slug:c.Z_().min(1,"Slug is required").regex(/^[a-z0-9-]+$/,"Slug must be lowercase letters, numbers, and hyphens"),providerType:c.Km(["openai","anthropic","gemini"],{required_error:"Provider type is required"}),baseUrl:c.Z_().url("Must be a valid URL").optional().or(c.i0("")),apiKey:c.Z_().min(1,"API key is required"),priority:c.Rx().int().min(0).max(100).default(0),weight:c.Rx().int().min(1).max(100).default(1)});function b(e){var t,r,a,i,n,c,b;let{defaultValues:j,onSubmit:N,onCancel:w,onTestConnection:k,isLoading:S=!1,submitLabel:C="Create Provider"}=e,[T,A]=(0,l.useState)(!1),[U,P]=(0,l.useState)(!1),[M,L]=(0,l.useState)(null),{register:R,handleSubmit:O,watch:I,formState:{errors:Z,isDirty:_}}=(0,o.cI)({resolver:(0,d.F)(x),defaultValues:{name:"",slug:"",providerType:"openai",baseUrl:"",apiKey:"",priority:0,weight:1,...j}}),q=I("providerType"),E=async()=>{if(!k)return;let e=I();P(!0),L(null);try{let t=await k(e);L(t)}catch(e){L({success:!1,message:e instanceof Error?e.message:"Connection test failed"})}finally{P(!1)}};return(0,s.jsxs)("form",{onSubmit:O(N),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(h.W,{label:"Name",error:null===(t=Z.name)||void 0===t?void 0:t.message,hint:"Display name for this provider",children:(0,s.jsx)("input",{type:"text",...R("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., OpenAI Production"})}),(0,s.jsx)(h.W,{label:"Slug",error:null===(r=Z.slug)||void 0===r?void 0:r.message,hint:"Unique identifier (auto-generated from name)",children:(0,s.jsx)("input",{type:"text",...R("slug"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., openai-production"})})]}),(0,s.jsxs)(p.m,{label:"Provider Type",error:null===(a=Z.providerType)||void 0===a?void 0:a.message,hint:"The AI provider service",...R("providerType"),children:[(0,s.jsx)("option",{value:"openai",children:"OpenAI"}),(0,s.jsx)("option",{value:"anthropic",children:"Anthropic"}),(0,s.jsx)("option",{value:"gemini",children:"Google Gemini"})]}),(0,s.jsx)(h.W,{label:"API Key",error:null===(i=Z.apiKey)||void 0===i?void 0:i.message,hint:"Your ".concat(q," API key"),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:T?"text":"password",...R("apiKey"),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"sk-..."}),(0,s.jsx)("button",{type:"button",onClick:()=>A(!T),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:T?(0,s.jsx)(m.Z,{className:"w-4 h-4"}):(0,s.jsx)(g.Z,{className:"w-4 h-4"})})]})}),(0,s.jsx)(h.W,{label:"Base URL (Optional)",error:null===(n=Z.baseUrl)||void 0===n?void 0:n.message,hint:"Default: ".concat(v(q)),children:(0,s.jsx)("input",{type:"url",...R("baseUrl"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:v(q)})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(h.W,{label:"Priority",error:null===(c=Z.priority)||void 0===c?void 0:c.message,hint:"Higher priority providers are preferred (0-100)",children:(0,s.jsx)("input",{type:"number",...R("priority",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:0,max:100})}),(0,s.jsx)(h.W,{label:"Weight",error:null===(b=Z.weight)||void 0===b?void 0:b.message,hint:"Load balancing weight (1-100)",children:(0,s.jsx)("input",{type:"number",...R("weight",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:1,max:100})})]}),M&&(0,s.jsxs)("div",{className:"p-4 rounded-lg ".concat(M.success?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:[(0,s.jsx)("p",{className:"font-medium",children:M.success?"Connection successful":"Connection failed"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:M.message}),M.latency&&(0,s.jsxs)("p",{className:"text-sm mt-1",children:["Latency: ",M.latency,"ms"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[k&&(0,s.jsx)(u.z,{type:"button",variant:"secondary",onClick:E,disabled:U||!_,children:U?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(u.z,{type:"button",variant:"secondary",onClick:w,children:"Cancel"}),(0,s.jsx)(u.z,{type:"submit",disabled:S,children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2 animate-spin"}),C,"..."]}):C})]})]})]})}function v(e){switch(e){case"openai":return"https://api.openai.com/v1";case"anthropic":return"https://api.anthropic.com";case"gemini":return"https://generativelanguage.googleapis.com";default:return""}}var j=r(5847),N=r(1051),w=r(1961);function k(){let e=(0,a.useRouter)(),t=(0,j.ez)(),r=(0,j.Bz)(),l=async r=>{try{await t.mutateAsync(r),N.c0.success("Provider created",'Successfully created provider "'.concat(r.name,'"')),e.push("/providers")}catch(t){let e=t instanceof w.Hx?t.message:"Failed to create provider";N.c0.error("Creation failed",e)}},o=async e=>{try{return await r.mutateAsync(e.slug)}catch(e){throw e}};return(0,s.jsx)(i.L,{children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Provider"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Add a new AI provider to your gateway"})]}),(0,s.jsx)(n.Z,{children:(0,s.jsx)(b,{onSubmit:l,onCancel:()=>{e.push("/providers")},onTestConnection:o,isLoading:t.isPending,submitLabel:"Create Provider"})})]})})}},3964:function(e,t,r){"use strict";r.d(t,{W:function(){return a}});var s=r(7437);function a(e){let{label:t,children:r,error:a,hint:i,required:n}=e;return(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[t,n&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),r,a?(0,s.jsx)("p",{className:"text-sm text-red-600",children:a}):i?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:i}):null]})}},5510:function(e,t,r){"use strict";r.d(t,{m:function(){return a}});var s=r(7437);let a=(0,r(2265).forwardRef)((e,t)=>{let{label:r,children:a,error:i,hint:n,required:l,className:o="",...d}=e;return(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[r,l&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsx)("select",{ref:t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white ".concat(i?"border-red-300 focus:ring-red-500":""," ").concat(o),...d,children:a}),i?(0,s.jsx)("p",{className:"text-sm text-red-600",children:i}):n?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:n}):null]})});a.displayName="SelectField"},5542:function(e,t,r){"use strict";r.d(t,{Zk:function(){return i},v2:function(){return n},xb:function(){return a},xo:function(){return s}});let s={all:["projects"],lists:()=>[...s.all,"list"],list:e=>[...s.lists(),e],details:()=>[...s.all,"detail"],detail:e=>[...s.details(),e],stream:()=>[...s.all,"stream"]},a={all:["apiKeys"],lists:()=>[...a.all,"list"],list:e=>[...a.lists(),e],details:()=>[...a.all,"detail"],detail:e=>[...a.details(),e],stats:()=>[...a.all,"stats"]},i={all:["usage"],lists:()=>[...i.all,"list"],list:e=>[...i.lists(),e],records:()=>[...i.all,"records"],record:e=>[...i.records(),e],trends:()=>[...i.all,"trends"],trend:e=>[...i.trends(),e],summary:()=>[...i.all,"summary"],summaryDetail:e=>[...i.summary(),e],aggregations:()=>[...i.all,"aggregations"],aggregation:(e,t)=>[...i.aggregations(),{groupBy:e,filters:t}],exports:()=>[...i.all,"exports"],export:e=>[...i.exports(),e]},n={all:["providers"],lists:()=>[...n.all,"list"],list:()=>[...n.lists()],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],health:e=>[...n.detail(e),"health"]}},5847:function(e,t,r){"use strict";r.d(t,{Bz:function(){return m},ez:function(){return p},ko:function(){return d},qM:function(){return c}});var s=r(1713),a=r(9827),i=r(1770),n=r(1961),l=r(5542);let o=async()=>{let e=await n.x1.get("/v0/admin/providers");return{providers:(e.data||e.providers||[]).map(e=>{var t,r;let s=e.providerType||"other",a=e.status||"healthy",i=(null===(t=e.circuitState)||void 0===t?void 0:t.state)||"closed";return{id:e.id,name:e.name,displayName:e.name,status:"active"===a?"healthy":"inactive"===a?"disabled":"degraded"===a?"degraded":"unhealthy"===a?"unhealthy":"disabled"===a?"disabled":"healthy",circuitBreaker:i,requestCount24h:0,errorRate24h:0,models:[s],..."number"==typeof(null===(r=e.health)||void 0===r?void 0:r.latencyMs)?{latencyMs:e.health.latencyMs}:{}}})}};function d(e){return(0,s.a)({queryKey:l.v2.list(),queryFn:o,refetchInterval:3e4,staleTime:15e3,...e})}function c(){let e=(0,a.NL)();return()=>{e.invalidateQueries({queryKey:l.v2.all})}}let u=async e=>n.x1.post("/v0/admin/providers",e),h=async e=>n.x1.post("/v0/admin/providers/".concat(e,"/test"));function p(e){let t=(0,a.NL)();return(0,i.D)({mutationFn:u,onSuccess:e=>{t.invalidateQueries({queryKey:l.v2.lists()}),t.setQueryData(l.v2.detail(e.name),e)},...e})}function m(e){return(0,i.D)({mutationFn:h,...e})}},1051:function(e,t,r){"use strict";r.d(t,{c0:function(){return n}});var s=r(9625),a=r(6885);let i=(0,s.Ue)()((0,a.tJ)((e,t)=>({sidebarCollapsed:!1,theme:"system",notifications:[],activeModal:null,globalSearchOpen:!1,isLoading:!1,toggleSidebar:()=>{e(e=>({sidebarCollapsed:!e.sidebarCollapsed}))},setSidebarCollapsed:t=>{e({sidebarCollapsed:t})},setTheme:t=>{if(e({theme:t}),"undefined"!=typeof document){let e=document.documentElement;if("system"===t){let t=window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.toggle("dark",t)}else e.classList.toggle("dark","dark"===t)}},openModal:t=>{e({activeModal:t}),"undefined"!=typeof document&&(document.body.style.overflow="hidden")},closeModal:()=>{e({activeModal:null}),"undefined"!=typeof document&&(document.body.style.overflow="")},toggleGlobalSearch:()=>{e(e=>({globalSearchOpen:!e.globalSearchOpen}))},setGlobalSearchOpen:t=>{e({globalSearchOpen:t})},addNotification:t=>{let r={...t,id:"notif-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),read:!1};e(e=>({notifications:[r,...e.notifications].slice(0,100)}))},markNotificationAsRead:t=>{e(e=>({notifications:e.notifications.map(e=>e.id===t?{...e,read:!0}:e)}))},markAllNotificationsAsRead:()=>{e(e=>({notifications:e.notifications.map(e=>({...e,read:!0}))}))},removeNotification:t=>{e(e=>({notifications:e.notifications.filter(e=>e.id!==t)}))},clearNotifications:()=>{e({notifications:[]})},getUnreadCount:()=>t().notifications.filter(e=>!e.read).length,setLoading:t=>{e({isLoading:t})}}),{name:"rad-ui-storage",partialize:e=>({sidebarCollapsed:e.sidebarCollapsed,theme:e.theme})})),n={success:(e,t,r)=>{i.getState().addNotification({type:"success",title:e,...t&&{message:t},...r&&{action:r}})},error:(e,t,r)=>{i.getState().addNotification({type:"error",title:e,...t&&{message:t},...r&&{action:r}})},warning:(e,t,r)=>{i.getState().addNotification({type:"warning",title:e,...t&&{message:t},...r&&{action:r}})},info:(e,t,r)=>{i.getState().addNotification({type:"info",title:e,...t&&{message:t},...r&&{action:r}})}}}},function(e){e.O(0,[15,954,909,262,735,971,117,744],function(){return e(e.s=5560)}),_N_E=e.O()}]);