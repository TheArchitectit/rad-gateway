(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{3008:function(e,s,t){Promise.resolve().then(t.bind(t,4882))},4882:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(7437),i=t(2265),n=t(4892),r=t(6311),o=t(3141);function l(){let[e,s]=(0,i.useState)("openai"),[t,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[h,u]=(0,i.useState)(null),[x,v]=(0,i.useState)(null),[p,m]=(0,i.useState)(""),[f,j]=(0,i.useState)(""),[b,k]=(0,i.useState)(""),g=async()=>{l(!0),k(""),d(null);try{let s=await fetch("/v1/oauth/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,redirectUri:"".concat(window.location.origin,"/oauth")})});if(!s.ok)throw Error("Request failed (".concat(s.status,")"));let t=await s.json();d(t),m(t.sessionId)}catch(e){k(e instanceof Error?e.message:"Failed to start OAuth")}finally{l(!1)}},N=async()=>{if(p.trim()){l(!0),k("");try{var e,s;let t=await fetch("/v1/oauth/session/".concat(encodeURIComponent(p.trim())));if(!t.ok)throw Error("Request failed (".concat(t.status,")"));let a=await t.json();u(a),(null===(s=a.session)||void 0===s?void 0:null===(e=s.token)||void 0===e?void 0:e.accessToken)&&j(a.session.token.accessToken)}catch(e){k(e instanceof Error?e.message:"Failed to load session")}finally{l(!1)}}},S=async()=>{if(p.trim()){l(!0),k("");try{let e=await fetch("/v1/oauth/revoke/".concat(encodeURIComponent(p.trim())),{method:"POST"});if(!e.ok)throw Error("Request failed (".concat(e.status,")"));await N()}catch(e){k(e instanceof Error?e.message:"Failed to revoke session")}finally{l(!1)}}},y=async()=>{if(!f.trim()){v({valid:!1,error:"Access token required"});return}l(!0),k("");try{let s=await fetch("/v1/oauth/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,accessToken:f})});if(!s.ok)throw Error("Request failed (".concat(s.status,")"));let t=await s.json();v(t)}catch(e){k(e instanceof Error?e.message:"Failed to validate token")}finally{l(!1)}};return(0,a.jsx)(n.L,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-[var(--ink-900)]",children:"OAuth Providers"}),(0,a.jsx)("p",{className:"text-[var(--ink-500)]",children:"Session lifecycle console for connected provider credentials."})]}),(0,a.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,a.jsx)(r.Z,{title:"Start OAuth Session",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1.5 block text-xs font-semibold uppercase tracking-[0.1em] text-[var(--ink-500)]",children:"Provider"}),(0,a.jsxs)("select",{value:e,onChange:e=>s(e.target.value),className:"ui-input",children:[(0,a.jsx)("option",{value:"openai",children:"OpenAI"}),(0,a.jsx)("option",{value:"openai-codex",children:"OpenAI Codex"}),(0,a.jsx)("option",{value:"anthropic",children:"Anthropic"}),(0,a.jsx)("option",{value:"github-copilot",children:"GitHub Copilot"}),(0,a.jsx)("option",{value:"gemini-cli",children:"Gemini CLI"})]})]}),(0,a.jsx)(o.z,{onClick:()=>void g(),disabled:t,children:t?"Starting...":"Start OAuth Flow"}),c&&(0,a.jsxs)("div",{className:"rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] p-3 text-sm text-[var(--ink-700)]",children:[(0,a.jsxs)("p",{children:["Session: ",(0,a.jsx)("span",{className:"font-semibold text-[var(--ink-900)]",children:c.sessionId})]}),(0,a.jsxs)("p",{children:["State: ",(0,a.jsx)("span",{className:"font-semibold text-[var(--ink-900)]",children:c.state})]}),(0,a.jsxs)("p",{children:["Status: ",(0,a.jsx)("span",{className:"font-semibold text-[var(--ink-900)]",children:c.status})]}),(0,a.jsx)("a",{href:c.authUrl,target:"_blank",rel:"noreferrer",className:"text-[var(--status-info)] underline-offset-2 hover:underline",children:"Open provider authorization URL"})]})]})}),(0,a.jsx)(r.Z,{title:"Session Inspector",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1.5 block text-xs font-semibold uppercase tracking-[0.1em] text-[var(--ink-500)]",children:"Session ID"}),(0,a.jsx)("input",{value:p,onChange:e=>m(e.target.value),placeholder:"oauth session id",className:"ui-input"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(o.z,{variant:"secondary",onClick:()=>void N(),disabled:t||!p.trim(),children:"Load Session"}),(0,a.jsx)(o.z,{variant:"danger",onClick:()=>void S(),disabled:t||!p.trim(),children:"Revoke Session"})]}),h&&(0,a.jsxs)("div",{className:"rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] p-3 text-sm text-[var(--ink-700)]",children:[(0,a.jsxs)("p",{children:["Provider: ",(0,a.jsx)("span",{className:"font-semibold text-[var(--ink-900)]",children:h.session.provider})]}),(0,a.jsxs)("p",{children:["Status: ",(0,a.jsx)("span",{className:"font-semibold text-[var(--ink-900)]",children:h.session.status})]}),(0,a.jsxs)("p",{children:["Updated: ",(0,a.jsx)("span",{className:"font-semibold text-[var(--ink-900)]",children:new Date(h.session.updatedAt).toLocaleString()})]})]})]})})]}),(0,a.jsx)(r.Z,{title:"Token Validation",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:f,onChange:e=>j(e.target.value),rows:4,className:"ui-input font-mono text-xs",placeholder:"Paste access token to validate"}),(0,a.jsx)(o.z,{variant:"secondary",onClick:()=>void y(),disabled:t,children:"Validate Access Token"}),x&&(0,a.jsxs)("div",{className:"rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] p-3 text-sm text-[var(--ink-700)]",children:[(0,a.jsxs)("p",{children:["Result:"," ",(0,a.jsx)("span",{className:"font-semibold ".concat(x.valid?"text-[var(--status-normal)]":"text-[var(--status-critical)]"),children:x.valid?"Valid":"Invalid"})]}),x.error&&(0,a.jsx)("p",{className:"text-[var(--status-critical)]",children:x.error}),x.metadata&&(0,a.jsx)("pre",{className:"mt-2 overflow-auto rounded bg-[rgba(43,32,21,0.08)] p-2 text-xs text-[var(--ink-900)]",children:JSON.stringify(x.metadata,null,2)})]})]})}),b&&(0,a.jsx)(r.Z,{className:"border border-[rgba(152,43,33,0.3)] bg-[rgba(152,43,33,0.08)]",children:(0,a.jsx)("p",{className:"text-sm text-[var(--status-critical)]",children:b})})]})})}}},function(e){e.O(0,[142,735,971,117,744],function(){return e(e.s=3008)}),_N_E=e.O()}]);