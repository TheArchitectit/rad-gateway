(()=>{var e={};e.id=910,e.ids=[910],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(2767),s(1740),s(5866);var a=s(3191),r=s(8716),l=s(7922),i=s.n(l),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["control-rooms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2767)),"/mnt/ollama/git/RADAPI01/web/src/app/control-rooms/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1740)),"/mnt/ollama/git/RADAPI01/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/mnt/ollama/git/RADAPI01/web/src/app/control-rooms/page.tsx"],m="/control-rooms/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/control-rooms/page",pathname:"/control-rooms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},824:(e,t,s)=>{Promise.resolve().then(s.bind(s,1160))},1291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(5578).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(5578).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(5578).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(326),r=s(7577),l=s(3855),i=s(8091),n=s(1291),o=s(6697),d=s(3634),c=s(3892),m=s(8350),x=s(5030),p=s(4583),u=s(6273),h=s(5874);let g=[{id:"room-main",name:"Main Engine Room",description:"Global command view for all providers and traffic.",tags:["scope:all","layout:grid"],layout:"grid",isDefault:!0},{id:"room-cost",name:"Cost Sentinel",description:"Focused on usage economics and error drift.",tags:["metric:cost","metric:error"],layout:"compact"},{id:"room-openai",name:"OpenAI Pressure Deck",description:"Dedicated monitoring lane for OpenAI traffic.",tags:["provider:openai"],layout:"list"}];function v(){let[e,t]=(0,r.useState)(g),[s,v]=(0,r.useState)(g[0]?.id||""),[f,j]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[N,k]=(0,r.useState)(""),w=(0,r.useMemo)(()=>(function(){let e=new Date;return{startTime:new Date(e.getTime()-216e5).toISOString(),endTime:e.toISOString()}})(),[]),{data:P,isLoading:M}=(0,h.ko)(),{data:A,isLoading:Z}=(0,h.LD)(w),{data:D,isLoading:C}=(0,h.HN)({...w,page:1,pageSize:15}),R=function(e,t){if(!t||t.tags.includes("scope:all"))return e;let s=t.tags.filter(e=>e.startsWith("provider:")).map(e=>e.replace("provider:","").trim()),a=t.tags.filter(e=>e.startsWith("status:")).map(e=>e.replace("status:","").trim());return e.filter(e=>{let t=e.name.toLowerCase();return(!(s.length>0)||!!s.some(e=>t.includes(e)))&&(!(a.length>0)||!!a.includes(e.status))})}(P?.providers||[],e.find(e=>e.id===s)),_={healthy:R.filter(e=>"healthy"===e.status).length,degraded:R.filter(e=>"degraded"===e.status).length,unhealthy:R.filter(e=>"unhealthy"===e.status).length},$=(A?.totalRequests||0)/360,S=A?.avgDurationMs||0,O=A?.errorRate||0,q=(0,r.useMemo)(()=>{let e=[];return R.forEach(t=>{"unhealthy"===t.status?e.push({level:"critical",message:`${t.displayName||t.name} is unhealthy`,time:"live"}):"degraded"===t.status&&e.push({level:"warning",message:`${t.displayName||t.name} latency is degraded`,time:"live"})}),O>2&&e.push({level:"critical",message:`Error rate elevated at ${O.toFixed(2)}%`,time:"window"}),S>900&&e.push({level:"warning",message:`Latency threshold breach: ${Math.round(S)}ms`,time:"window"}),0===e.length&&e.push({level:"info",message:"No active alerts in this control room.",time:"live"}),e.slice(0,6)},[S,O,R]),E=a=>{let r=e.filter(e=>e.id!==a);if(t(r.length>0?r:g),s===a){let e=r[0]||g[0];v(e?.id||"")}},I=M||Z||C;return a.jsx(m.L,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-[var(--ink-900)]",children:"Control Rooms"}),a.jsx("p",{className:"text-[var(--ink-500)]",children:"Foglight-style operational stations tuned by tags, scope, and monitoring posture."})]}),a.jsx(x.Z,{children:(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-4",children:[a.jsx("input",{value:f,onChange:e=>j(e.target.value),placeholder:"Room name",className:"ui-input"}),a.jsx("input",{value:b,onChange:e=>y(e.target.value),placeholder:"Description",className:"ui-input"}),a.jsx("input",{value:N,onChange:e=>k(e.target.value),placeholder:"Tags (provider:openai,status:degraded)",className:"ui-input"}),(0,a.jsxs)(p.z,{onClick:()=>{if(!f.trim())return;let e={id:`room-${Date.now()}`,name:f.trim(),description:b.trim()||"Custom control room",tags:N.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0),layout:"grid"};t(t=>[e,...t]),v(e.id),j(""),y(""),k("")},children:[a.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Create Room"]})]})})]}),a.jsx(x.Z,{title:"Available Rooms",children:a.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:e.map(e=>{let t=e.id===s;return(0,a.jsxs)("button",{type:"button",onClick:()=>v(e.id),className:`rounded-lg border p-4 text-left transition-colors ${t?"border-[var(--brass-500)] bg-[rgba(177,133,50,0.16)]":"border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] hover:bg-[rgba(43,32,21,0.12)]"}`,children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[a.jsx("p",{className:"font-semibold text-[var(--ink-900)]",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[e.isDefault&&a.jsx(u.O,{status:"active"}),!e.isDefault&&a.jsx("span",{role:"button",tabIndex:0,onClick:t=>{t.stopPropagation(),E(e.id)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),E(e.id))},className:"rounded-md p-1 text-[var(--ink-500)] hover:bg-[rgba(43,32,21,0.12)]",children:a.jsx(i.Z,{className:"h-4 w-4"})})]})]}),a.jsx("p",{className:"mb-2 text-sm text-[var(--ink-500)]",children:e.description}),a.jsx("p",{className:"text-xs uppercase tracking-[0.08em] text-[var(--ink-500)]",children:e.tags.length>0?e.tags.join(" \xb7 "):"No filters"})]},e.id)})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(x.Z,{children:[a.jsx("div",{className:"text-sm text-[var(--ink-500)]",children:"Requests / Min"}),a.jsx("div",{className:"mt-1 text-2xl font-bold text-[var(--ink-900)]",children:I?"...":$.toFixed(1)})]}),(0,a.jsxs)(x.Z,{children:[a.jsx("div",{className:"text-sm text-[var(--ink-500)]",children:"Avg Latency"}),a.jsx("div",{className:"mt-1 text-2xl font-bold text-[var(--ink-900)]",children:I?"...":`${Math.round(S)}ms`})]}),(0,a.jsxs)(x.Z,{children:[a.jsx("div",{className:"text-sm text-[var(--ink-500)]",children:"Error Rate"}),a.jsx("div",{className:"mt-1 text-2xl font-bold text-[var(--status-critical)]",children:I?"...":`${O.toFixed(2)}%`})]}),(0,a.jsxs)(x.Z,{children:[a.jsx("div",{className:"text-sm text-[var(--ink-500)]",children:"Healthy Providers"}),a.jsx("div",{className:"mt-1 text-2xl font-bold text-[var(--ink-900)]",children:I?"...":`${_.healthy}/${R.length}`})]})]}),a.jsx(x.Z,{title:"Provider Health Mesh",children:(0,a.jsxs)("div",{className:"space-y-3",children:[0===R.length&&!I&&a.jsx("p",{className:"text-sm text-[var(--ink-500)]",children:"No providers match this control room scope."}),R.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] px-4 py-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-[var(--ink-900)]",children:e.displayName||e.name}),(0,a.jsxs)("p",{className:"text-sm text-[var(--ink-500)]",children:["Circuit ",e.circuitBreaker," \xb7 ",e.latencyMs?`${e.latencyMs}ms`:"No latency sample"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(u.O,{status:e.status,showPulse:"healthy"===e.status}),a.jsx(u.O,{status:e.circuitBreaker})]})]},e.id))]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[a.jsx(x.Z,{title:"Recent Alerts",children:a.jsx("div",{className:"space-y-3",children:q.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] px-3 py-2",children:[a.jsx(n.Z,{className:`mt-0.5 h-5 w-5 ${"critical"===e.level?"text-[var(--status-critical)]":"warning"===e.level?"text-[var(--status-warning)]":"text-[var(--status-info)]"}`}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--ink-900)]",children:e.message}),a.jsx("p",{className:"text-xs text-[var(--ink-500)]",children:e.time})]})]},`${e.message}-${t}`))})}),a.jsx(x.Z,{title:"Telemetry Events",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(D?.data||[]).slice(0,6).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] px-3 py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["chat"===e.incomingApi?a.jsx(o.Z,{className:"h-4 w-4 text-[var(--status-info)]"}):"responses"===e.incomingApi?a.jsx(d.Z,{className:"h-4 w-4 text-[var(--brass-700)]"}):a.jsx(c.Z,{className:"h-4 w-4 text-[var(--ink-500)]"}),(0,a.jsxs)("span",{className:"text-sm text-[var(--ink-700)]",children:[e.incomingApi.toUpperCase()," \xb7 ",e.selectedModel||e.incomingModel]})]}),(0,a.jsxs)("span",{className:"text-xs text-[var(--ink-500)]",children:[e.durationMs,"ms"]})]},e.id)),!C&&0===(D?.data||[]).length&&a.jsx("p",{className:"text-sm text-[var(--ink-500)]",children:"No recent telemetry events in selected window."})]})})]})]})})}},6273:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var a=s(326);s(7577);var r=s(5043);let l={healthy:{color:"success",label:"Healthy"},degraded:{color:"warning",label:"Degraded"},unhealthy:{color:"error",label:"Unhealthy"},disabled:{color:"default",label:"Disabled"},pending:{color:"info",label:"Pending"},active:{color:"success",label:"Active"},inactive:{color:"default",label:"Inactive"},closed:{color:"success",label:"Closed"},open:{color:"error",label:"Open"},"half-open":{color:"warning",label:"Half-Open"}};function i({status:e,showPulse:t=!1}){let s=l[e];return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t&&"healthy"===e&&(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-[rgba(47,122,79,0.55)] opacity-75"}),a.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-[var(--status-normal)]"})]}),a.jsx(r.C,{color:s.color,children:s.label})]})}},2767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/mnt/ollama/git/RADAPI01/web/src/app/control-rooms/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[433,378,463,56,474,422],()=>s(1919));module.exports=a})();