(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9140:function(e,s,a){Promise.resolve().then(a.bind(a,7850))},7850:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return N}});var t=a(7437),l=a(2265),i=a(4892),n=a(6311);function r(e){let{className:s="",width:a,height:l,circle:i=!1}=e,n={};return a&&(n.width="number"==typeof a?"".concat(a,"px"):a),l&&(n.height="number"==typeof l?"".concat(l,"px"):l),(0,t.jsx)("div",{className:"\n        animate-pulse bg-gray-200 dark:bg-gray-700\n        ".concat(i?"rounded-full":"rounded","\n        ").concat(s,"\n      "),style:n,"aria-hidden":"true"})}function c(e){let{title:s,value:a,description:l,icon:i,change:n,isLoading:c=!1,className:d=""}=e;return c?(0,t.jsxs)("div",{className:"ui-panel rounded-xl p-4 ".concat(d),children:[(0,t.jsx)(r,{className:"h-4 w-24 mb-2"}),(0,t.jsx)(r,{className:"h-8 w-32 mb-2"}),(0,t.jsx)(r,{className:"h-3 w-16"})]}):(0,t.jsxs)("div",{className:"ui-panel rounded-xl p-4 ".concat(d),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-[var(--ink-500)]",children:s}),i&&(0,t.jsx)("div",{className:"text-[var(--brass-700)]",children:i})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-baseline",children:[(0,t.jsx)("span",{className:"text-2xl font-semibold text-[var(--ink-900)]",children:a}),n&&(0,t.jsxs)("span",{className:"ml-2 text-sm font-medium ".concat(n.positive?"text-[var(--status-normal)]":"text-[var(--status-critical)]"),children:[n.positive?"+":"",n.value,"%"]})]}),l&&(0,t.jsx)("p",{className:"mt-1 text-sm text-[var(--ink-500)]",children:l})]})}var d=a(3141),o=a(7943),x=a(9376),h=a(9397),m=a(6137),u=a(4401),p=a(4001),g=a(8755);let v=(0,g.Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),j=(0,g.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),f=(0,g.Z)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var b=a(4581);function N(){let e=(0,x.useRouter)(),s=(0,l.useMemo)(()=>({startTime:new Date(Date.now()-864e5).toISOString(),endTime:new Date().toISOString()}),[]),{data:a,isLoading:r}=(0,b.ko)(),{data:g,isLoading:N}=(0,b.q4)({page:1,pageSize:200}),{data:y,isLoading:w}=(0,b.Z0)({page:1,pageSize:200}),{data:k,isLoading:L}=(0,b.LD)(s),{data:Z,isLoading:A}=(0,b.HN)({...s,page:1,pageSize:6}),C=(null==a?void 0:a.providers)||[],S=(null==g?void 0:g.data)||[],M=(null==y?void 0:y.data)||[],O=(null==Z?void 0:Z.data)||[],H=C.filter(e=>"disabled"!==e.status).length,P=C.filter(e=>"healthy"===e.status).length,I=S.filter(e=>"active"===e.status).length,z=C.filter(e=>"unhealthy"===e.status).length,D=r||N||w||L;return(0,t.jsx)(i.L,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[var(--ink-900)]",children:"Operations Dashboard"}),(0,t.jsx)("p",{className:"text-[var(--ink-500)]",children:"Live command view for providers, usage flow, and reliability posture."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(d.z,{onClick:()=>e.push("/api-keys/new"),children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"New API Key"]}),(0,t.jsxs)(d.z,{variant:"secondary",onClick:()=>e.push("/providers/new"),children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Add Provider"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(c,{title:"Active Providers",value:H,icon:(0,t.jsx)(m.Z,{className:"w-5 h-5"}),isLoading:D,...C.length>0?{change:{value:Math.round(P/C.length*100),positive:P===C.length}}:{},description:"Healthy capacity over configured endpoints"}),(0,t.jsx)(c,{title:"API Calls (24h)",value:((null==k?void 0:k.totalRequests)||0).toLocaleString(),icon:(0,t.jsx)(u.Z,{className:"w-5 h-5"}),isLoading:L,description:"From usage summary window"}),(0,t.jsx)(c,{title:"Active API Keys",value:I,icon:(0,t.jsx)(p.Z,{className:"w-5 h-5"}),isLoading:N,description:"".concat(S.length," total keys across workspaces")}),(0,t.jsx)(c,{title:"Cost (24h)",value:"$".concat(((null==k?void 0:k.totalCostUsd)||0).toFixed(2)),icon:(0,t.jsx)(v,{className:"w-5 h-5"}),isLoading:L,description:"Aggregated spend in current range"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(n.Z,{title:"System Health",header:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-[var(--ink-900)]",children:"System Health"}),z>0?(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-[rgba(152,43,33,0.35)] bg-[rgba(152,43,33,0.15)] px-2 py-0.5 text-xs font-semibold text-[var(--status-critical)]",children:[(0,t.jsx)(j,{className:"h-3.5 w-3.5"}),z," Incident",1===z?"":"s"]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-[rgba(47,122,79,0.35)] bg-[rgba(47,122,79,0.15)] px-2 py-0.5 text-xs font-semibold text-[var(--status-normal)]",children:[(0,t.jsx)(f,{className:"h-3.5 w-3.5"}),"Stable"]})]}),children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-[var(--ink-700)]",children:"Gateway Runtime"}),(0,t.jsx)(o.O,{status:z>0?"degraded":"healthy"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-[var(--ink-700)]",children:"Workspace Inventory"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-[var(--ink-900)]",children:w?"...":"".concat(M.length," active projects")})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-[var(--ink-700)]",children:"Provider Reliability"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-[var(--ink-900)]",children:0===C.length?"No providers":"".concat(P,"/").concat(C.length," healthy")})]}),(0,t.jsx)("div",{className:"rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] p-3 text-xs text-[var(--ink-500)]",children:"Health model follows Foglight-style severity discipline: healthy, degraded, unhealthy, disabled."})]})}),(0,t.jsx)(n.Z,{title:"Recent Activity",children:(0,t.jsxs)("div",{className:"space-y-3",children:[A&&(0,t.jsx)("p",{className:"text-sm text-[var(--ink-500)]",children:"Loading recent usage events..."}),!A&&0===O.length&&(0,t.jsx)("p",{className:"text-sm text-[var(--ink-500)]",children:"No recent usage records yet."}),O.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-[var(--brass-500)]"}),(0,t.jsxs)("span",{className:"flex-1 text-[var(--ink-700)]",children:[e.incomingApi.toUpperCase()," request on ",e.incomingModel]}),(0,t.jsxs)("span",{className:"text-[var(--ink-500)]",children:[e.durationMs,"ms"]})]},e.id))]})})]}),(0,t.jsx)(n.Z,{title:"Provider Fleet",children:(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[0===C.length&&(0,t.jsx)("p",{className:"text-sm text-[var(--ink-500)]",children:"No providers registered."}),C.map(e=>(0,t.jsxs)("div",{className:"rounded-lg border border-[var(--line-soft)] bg-[rgba(43,32,21,0.06)] p-3",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-3",children:[(0,t.jsx)("p",{className:"font-semibold text-[var(--ink-900)]",children:e.displayName||e.name}),(0,t.jsx)(o.O,{status:e.status})]}),(0,t.jsxs)("p",{className:"text-xs text-[var(--ink-500)]",children:["Circuit: ",e.circuitBreaker," \xb7 Latency: ",e.latencyMs?"".concat(e.latencyMs,"ms"):"n/a"]})]},e.id))]})})]})})}},7943:function(e,s,a){"use strict";a.d(s,{O:function(){return n}});var t=a(7437);a(2265);var l=a(6269);let i={healthy:{color:"success",label:"Healthy"},degraded:{color:"warning",label:"Degraded"},unhealthy:{color:"error",label:"Unhealthy"},disabled:{color:"default",label:"Disabled"},pending:{color:"info",label:"Pending"},active:{color:"success",label:"Active"},inactive:{color:"default",label:"Inactive"},closed:{color:"success",label:"Closed"},open:{color:"error",label:"Open"},"half-open":{color:"warning",label:"Half-Open"}};function n(e){let{status:s,showPulse:a=!1}=e,n=i[s];return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a&&"healthy"===s&&(0,t.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,t.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-[rgba(47,122,79,0.55)] opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-[var(--status-normal)]"})]}),(0,t.jsx)(l.C,{color:n.color,children:n.label})]})}}},function(e){e.O(0,[142,954,909,608,735,402,534,971,117,744],function(){return e(e.s=9140)}),_N_E=e.O()}]);