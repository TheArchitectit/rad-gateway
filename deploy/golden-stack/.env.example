# Golden Stack Environment Configuration Template
# Location: deploy/golden-stack/.env.example
#
# WARNING: This file contains placeholder values for documentation purposes.
# NEVER commit real credentials or secrets to version control.
#
# Copy this file to .env and replace values with your actual configuration.
# The .env file is git-ignored and should never be committed.
#
# =============================================================================
# SECURITY WARNING
# =============================================================================
# - Production credentials MUST be changed before deployment
# - Use strong, unique passwords in production (min 32 characters)
# - Store encryption keys in hardware security modules (HSM) or cloud KMS
# - Never expose database ports publicly - use internal networking only
# - Rotate credentials regularly per your security policy
# =============================================================================

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
# PostgreSQL serves as the shared database backend for both Infisical and OpenBao

POSTGRES_USER=secretstack
POSTGRES_PASSWORD=change-me-in-production-min-32-chars-recommended
POSTGRES_DB=secrets
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_SSL_MODE=prefer

# =============================================================================
# Infisical Configuration (Hot Vault)
# =============================================================================
# Infisical is the primary secrets management system for operational secrets

# Database connection (constructed from POSTGRES_* vars if not set)
INFISICAL_DB_URL=postgresql://secretstack:change-me@localhost:5432/secrets?sslmode=prefer

# Infisical encryption key - used to encrypt secrets at rest
# Generate with: openssl rand -base64 32
INFISICAL_ENCRYPTION_KEY=base64-encoded-32-byte-key-here-change-in-production

# Infisical API configuration
INFISICAL_API_URL=http://localhost:8080
INFISICAL_UI_URL=http://localhost:8080

# Service token for RAD Gateway integration
# Format: st.<uuid>.<uuid>.<signature>
INFISICAL_SERVICE_TOKEN=st.example-token-replace-with-real-token

# Project configuration
INFISICAL_PROJECT_SLUG=your-project-slug
INFISICAL_WORKSPACE_ID=your-workspace-uuid

# JWT settings for authentication
INFISICAL_JWT_SECRET=change-me-in-production-use-256-bit-key
INFISICAL_JWT_TTL=86400

# SMTP configuration for email notifications (optional)
INFISICAL_SMTP_HOST=
INFISICAL_SMTP_PORT=587
INFISICAL_SMTP_USER=
INFISICAL_SMTP_PASSWORD=
INFISICAL_SMTP_FROM=noreply@example.com

# =============================================================================
# OpenBao Configuration (Cold Vault)
# =============================================================================
# OpenBao provides long-term secrets retention for compliance and audit

# Database connection (constructed from POSTGRES_* vars if not set)
OPENBAO_DB_URL=postgresql://secretstack:change-me@localhost:5432/secrets?sslmode=prefer

# OpenBao API configuration
OPENBAO_API_ADDR=http://0.0.0.0:8200
OPENBAO_CLUSTER_ADDR=http://0.0.0.0:8201

# Cold vault retention settings
OPENBAO_COLD_VAULT_RETENTION_DAYS=3650
OPENBAO_COLD_VAULT_MAX_VERSIONS=100

# Unseal configuration (use Shamir's Secret Sharing in production)
# Minimum 3 keys required, total 5 keys generated
OPENBAO_UNSEAL_KEY_1=
OPENBAO_UNSEAL_KEY_2=
OPENBAO_UNSEAL_KEY_3=
OPENBAO_UNSEAL_KEY_4=
OPENBAO_UNSEAL_KEY_5=

# Root token (only for initial setup - rotate immediately)
OPENBAO_ROOT_TOKEN=

# Enable UI
OPENBAO_UI_ENABLED=true

# =============================================================================
# RAD Gateway Configuration
# =============================================================================
# RAD Gateway integrates with the Golden Stack for secrets management

RAD_LISTEN_ADDR=:8090
RAD_LOG_LEVEL=info
RAD_ENVIRONMENT=alpha

# API keys for gateway authentication
# Format: name:secret,name:secret
RAD_API_KEYS=default:change-me-in-production

# Provider API keys (loaded from Infisical if available)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GEMINI_API_KEY=

# Infisical integration settings
INFISICAL_TOKEN_FILE=/opt/radgateway01/config/infisical-token
RAD_DATA_DIR=/data

# =============================================================================
# Golden Stack Operational Settings
# =============================================================================

# Network configuration
GOLDEN_STACK_NETWORK=secret-stack
GOLDEN_STACK_SUBNET=10.88.0.0/16

# Container resource limits
POSTGRES_MEMORY_LIMIT=2g
INFISICAL_MEMORY_LIMIT=1g
OPENBAO_MEMORY_LIMIT=1g

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=
BACKUP_S3_REGION=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# Development/Local Settings (remove or modify for production)
# =============================================================================

# Disable SSL verification for local development
NODE_TLS_REJECT_UNAUTHORIZED=0

# Debug logging
DEBUG=false
LOG_LEVEL=info

# Development data paths
POSTGRES_DATA_DIR=./data/postgres
INFISICAL_DATA_DIR=./data/infisical
OPENBAO_DATA_DIR=./data/openbao
