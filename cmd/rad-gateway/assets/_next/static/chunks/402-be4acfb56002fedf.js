"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{1961:function(t,e,s){s.d(e,{Hx:function(){return i},x1:function(){return n}});let r=s(257).env.NEXT_PUBLIC_API_URL||"http://172.16.30.45:8090";class a{setAuthToken(t){this.authToken=t}getHeaders(){let t={"Content-Type":"application/json",Accept:"application/json"};return this.authToken&&(t.Authorization="Bearer ".concat(this.authToken)),t}buildUrl(t,e){let s=new URL("".concat(this.baseUrl).concat(t));return e&&Object.entries(e).forEach(t=>{let[e,r]=t;null!=r&&s.searchParams.set(e,String(r))}),s.toString()}async handleResponse(t){if(!t.ok){let e=await t.json().catch(()=>({error:{code:"unknown_error",message:"An unexpected error occurred"}}));throw new i(e.error.message,e.error.code,t.status,e.error.details,e.error.requestId)}if(204!==t.status)return t.json()}async get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.buildUrl(t,e.params),r=await fetch(s,{...e,method:"GET",headers:{...this.getHeaders(),...e.headers}});return this.handleResponse(r)}async post(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.buildUrl(t,s.params),a=await fetch(r,{...s,method:"POST",headers:{...this.getHeaders(),...s.headers},body:e?JSON.stringify(e):null});return this.handleResponse(a)}async put(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.buildUrl(t,s.params),a=await fetch(r,{...s,method:"PUT",headers:{...this.getHeaders(),...s.headers},body:e?JSON.stringify(e):null});return this.handleResponse(a)}async patch(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.buildUrl(t,s.params),a=await fetch(r,{...s,method:"PATCH",headers:{...this.getHeaders(),...s.headers},body:e?JSON.stringify(e):null});return this.handleResponse(a)}async delete(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.buildUrl(t,e.params),r=await fetch(s,{...e,method:"DELETE",headers:{...this.getHeaders(),...e.headers}});return this.handleResponse(r)}constructor(t){this.authToken=null,this.baseUrl=t.replace(/\/$/,"")}}class i extends Error{isUnauthorized(){return 401===this.status}isForbidden(){return 403===this.status}isNotFound(){return 404===this.status}isValidationError(){return 400===this.status||422===this.status}constructor(t,e,s,r,a){super(t),this.code=e,this.status=s,this.details=r,this.requestId=a,this.name="APIError"}}let n=new a(r)},7402:function(t,e,s){s.d(e,{Cu:function(){return h},q4:function(){return u}});var r=s(1713),a=s(9827),i=s(1770),n=s(1961),l=s(5542);let o=async t=>{let e={page:t.page||1,pageSize:t.pageSize||50};return t.status&&(e.status=t.status),t.workspaceId&&(e.workspaceId=t.workspaceId),t.search&&(e.search=t.search),t.sortBy&&(e.sortBy=t.sortBy),t.sortOrder&&(e.sortOrder=t.sortOrder),n.x1.get("/v0/admin/apikeys",{params:e})},d=async t=>n.x1.post("/v0/admin/apikeys",t);function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return(0,r.a)({queryKey:l.xb.list(t),queryFn:()=>o(t),...e})}function h(t){let e=(0,a.NL)();return(0,i.D)({mutationFn:d,onSuccess:t=>{e.invalidateQueries({queryKey:l.xb.lists()});let{keySecret:s,...r}=t;e.setQueryData(l.xb.detail(t.id),r)},...t})}},5542:function(t,e,s){s.d(e,{Zk:function(){return i},v2:function(){return n},xb:function(){return a},xo:function(){return r}});let r={all:["projects"],lists:()=>[...r.all,"list"],list:t=>[...r.lists(),t],details:()=>[...r.all,"detail"],detail:t=>[...r.details(),t],stream:()=>[...r.all,"stream"]},a={all:["apiKeys"],lists:()=>[...a.all,"list"],list:t=>[...a.lists(),t],details:()=>[...a.all,"detail"],detail:t=>[...a.details(),t],stats:()=>[...a.all,"stats"]},i={all:["usage"],lists:()=>[...i.all,"list"],list:t=>[...i.lists(),t],records:()=>[...i.all,"records"],record:t=>[...i.records(),t],trends:()=>[...i.all,"trends"],trend:t=>[...i.trends(),t],summary:()=>[...i.all,"summary"],summaryDetail:t=>[...i.summary(),t],aggregations:()=>[...i.all,"aggregations"],aggregation:(t,e)=>[...i.aggregations(),{groupBy:t,filters:e}],exports:()=>[...i.all,"exports"],export:t=>[...i.exports(),t]},n={all:["providers"],lists:()=>[...n.all,"list"],list:()=>[...n.lists()],details:()=>[...n.all,"detail"],detail:t=>[...n.details(),t],health:t=>[...n.detail(t),"health"]}}}]);